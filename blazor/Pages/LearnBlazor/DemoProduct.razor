@page "/LearnBlazor/demoproduct"
<h2 class="text-primary">DemoProduct</h2>
<p> Favourite Totals : @SelectedFavouriteCount</p>
<p>LastSelected Product :@LastSelectedProductName</p>
<div class="row">

    <div class="border m-1 ">
        <div class="row">
            @foreach (var prod in Products)
            {


                <blazor.Pages.LearnBlazor.LearnBlazorComponenets._IndividualProduct product="@prod"
                                                                                    OnFavouriteUpdated="FavouriteCountUpdate"
                                                                                    OnLastSelectedProductChange="SelectedProductUpdate">
                    <FirstFragment>#1</FirstFragment>
                    <SecondFragment>#2</SecondFragment>
                </blazor.Pages.LearnBlazor.LearnBlazorComponenets._IndividualProduct>
            }

        </div>

    </div>
</div>
@code { private int SelectedFavouriteCount = 0;
    public string LastSelectedProductName { get; set; }
    List<Demo_Product> Products = new();
    protected override void OnInitialized()
    {
        base.OnInitialized();
        Products.Add(new()
        {
            Id = 1,
            Name = "Rose",
            IsActive = true,
            Price = 10.99,
            ProductProperties = new List<Demo_ProductProp>()
{
            new Demo_ProductProp{Id =1, Key="color", Value="Black"},
            new Demo_ProductProp{Id =2, Key="Flavor", Value="Rose jasmine"},
            new Demo_ProductProp{Id =3, Key="size", Value="20oz"}
        }
        });
        Products.Add(new()
        {
            Id = 2,
            Name = "Blossm lily",
            IsActive = true,
            Price = 10.99,
            ProductProperties = new List<Demo_ProductProp>()
{
            new Demo_ProductProp{Id =1, Key="color", Value="white"},
            new Demo_ProductProp{Id =2, Key="Flavor", Value="Lily"},
            new Demo_ProductProp{Id =3, Key="size", Value="18oz"}
          }
        });
    }
    protected void FavouriteCountUpdate(bool isSelected)
    {
        if (isSelected)
            SelectedFavouriteCount++;
        else
            SelectedFavouriteCount--;


    }
    protected void SelectedProductUpdate(string name)
    {
        LastSelectedProductName = name;

    }
}


